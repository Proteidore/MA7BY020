{
  "hash": "0a45c4652cb9f5b1f9cbcbe9cde6c5d4",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Hmw III: SVD methods\"\ndate: \"2025-05-18\"\nengine: knitr\n\nexecute:\n  echo: true\n  eval: false\n  collapse: true\n\nformat:\n  html:\n    output-file: hmw-votes-2025.html\n  pdf:\n    output-file: hmw-votes-2025.pdf\n\ndraft: false\nprefer-html: true\n---\n\n\n\n\n::: {.callout-important}\n\n- Due : May 29 2025\n- Work in pairs\n- {{< fa brands github >}} Deliver your work through a github  repository\n- {{< fa desktop >}} Present your work (15 minutes) on 2025-05-30 \n\n:::\n\n\n### {{< fa map >}} Objectives\n\nThis homework is about  \n\n1. Using Matrix Factorization methods in Data analysis\n2. Investigating  Voting patterns in Paris \n\n\n\n\n\n\n\n\n\nI\\. **Voting Data**\n\nVoting data  per polling station can be obtained  from a variety of websites. \n\n\n- [An example](https://opendata.paris.fr/explore/dataset/elections-legislatives-2024-2emetour/information/)\n- [Another example](https://data.opendatasoft.com/api/explore/v2.1/catalog/datasets/elections-france-presidentielles-2022-1er-tour-par-bureau-de-vote@public/exports/parquet?lang=en&refine=dep_name%3A%22Paris%22&timezone=Europe%2FParis)\n- [Yet another one](https://data.smartidf.services/api/explore/v2.1/catalog/datasets/elections-europeennes-2024/exports/parquet?lang=en&timezone=Europe%2FBerlin)\n- [Opendatasoft API](https://help.opendatasoft.com/apis/ods-explore-v2/explore_v2.1.html)\n- [https://opendata.paris.fr](https://opendata.paris.fr)\n- [https://data.smartidf.services/pages/data/](https://data.smartidf.services/pages/data/)\n- [https://data.opendatasoft.com](https://data.opendatasoft.com/explore/?disjunctive.language&disjunctive.source_domain_title&disjunctive.theme&disjunctive.semantic.classes&disjunctive.semantic.properties&sort=explore.popularity_score)\n\n::: {.callout-note}\n\nMany datasets are available in several formats. When possible, use `parquet`. `parquet` files can be uploaded using package `arrow`. \n\n:::\n\n\n\n\n{{< pagebreak >}}\n\n\n\n\n\n\nData concerning polling stations can also be gathered from various sources.\n\n- [https://github.com/datagouv/bureau-vote](https://github.com/datagouv/bureau-vote)\n- [https://opendata.paris.fr](https://opendata.paris.fr)\n  \nYou first task will be to design an *extraction pipeline* to obtain the voting data you will analyse.\nYou will gather data corresponding to different types of elections (Municipales, Régionales, Législatives, Européennes, Présidentielles) that took place since Year 2000.\n\n\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"dknelhbrme\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#dknelhbrme table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#dknelhbrme thead, #dknelhbrme tbody, #dknelhbrme tfoot, #dknelhbrme tr, #dknelhbrme td, #dknelhbrme th {\n  border-style: none;\n}\n\n#dknelhbrme p {\n  margin: 0;\n  padding: 0;\n}\n\n#dknelhbrme .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#dknelhbrme .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#dknelhbrme .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#dknelhbrme .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#dknelhbrme .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#dknelhbrme .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#dknelhbrme .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#dknelhbrme .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#dknelhbrme .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#dknelhbrme .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#dknelhbrme .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#dknelhbrme .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#dknelhbrme .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#dknelhbrme .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#dknelhbrme .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#dknelhbrme .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#dknelhbrme .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#dknelhbrme .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#dknelhbrme .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dknelhbrme .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#dknelhbrme .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#dknelhbrme .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#dknelhbrme .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dknelhbrme .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#dknelhbrme .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#dknelhbrme .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#dknelhbrme .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dknelhbrme .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#dknelhbrme .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#dknelhbrme .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#dknelhbrme .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#dknelhbrme .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#dknelhbrme .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dknelhbrme .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#dknelhbrme .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dknelhbrme .gt_left {\n  text-align: left;\n}\n\n#dknelhbrme .gt_center {\n  text-align: center;\n}\n\n#dknelhbrme .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#dknelhbrme .gt_font_normal {\n  font-weight: normal;\n}\n\n#dknelhbrme .gt_font_bold {\n  font-weight: bold;\n}\n\n#dknelhbrme .gt_font_italic {\n  font-style: italic;\n}\n\n#dknelhbrme .gt_super {\n  font-size: 65%;\n}\n\n#dknelhbrme .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#dknelhbrme .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#dknelhbrme .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#dknelhbrme .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#dknelhbrme .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#dknelhbrme .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#dknelhbrme .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#dknelhbrme .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#dknelhbrme div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"title\">title</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"rounds\">rounds</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"year\">year</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"title\" class=\"gt_row gt_left\">Local</td>\n<td headers=\"rounds\" class=\"gt_row gt_right\">2</td>\n<td headers=\"year\" class=\"gt_row gt_right\">2008</td></tr>\n    <tr><td headers=\"title\" class=\"gt_row gt_left\">Parliament</td>\n<td headers=\"rounds\" class=\"gt_row gt_right\">2</td>\n<td headers=\"year\" class=\"gt_row gt_right\">2012</td></tr>\n    <tr><td headers=\"title\" class=\"gt_row gt_left\">Parliament</td>\n<td headers=\"rounds\" class=\"gt_row gt_right\">2</td>\n<td headers=\"year\" class=\"gt_row gt_right\">2017</td></tr>\n    <tr><td headers=\"title\" class=\"gt_row gt_left\">Local</td>\n<td headers=\"rounds\" class=\"gt_row gt_right\">2</td>\n<td headers=\"year\" class=\"gt_row gt_right\">2020</td></tr>\n    <tr><td headers=\"title\" class=\"gt_row gt_left\">European P</td>\n<td headers=\"rounds\" class=\"gt_row gt_right\">1</td>\n<td headers=\"year\" class=\"gt_row gt_right\">2024</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\nII\\. **Data cleaning**\n\nSome data cleaning may be necessary, for example\n\n- Some parties changed their names during the last 25 years. Defining a mapping can facilitate the comparison of results from different elections\n- Check that the names of `bulletins nuls`, `bulletins blancs`, ... are consistent across the different \ndatasets. \n\n::: {.callout-note}\n\nDesign  a cleaning pipeline. Save the cleaned data.\n\n:::\n\n\nIII\\. **Applying Matrix Factorization Methods (SVD)**\n\nFor one election round, the outcome is summarized by a `tibble` where rows (individuals) are \npolling stations and variables/columns are the number of votes obtained by the different condidates/parties. \n\nPerform PCA on different elections. Visualize and describe the result (attention, this is data analysis, not political science). \n\nYou may also perform CCA to compare different elections. \n\nFeel free to combine different methods.  \n\n\n\nIV\\. **Clustering**\n\nPerform clustering on the outcomes of the Principal Component Analyses.  \n  \n## References\n\n- [Advanced R Programming](https://adv-r.hadley.nz)\n  - [Functional programming](https://adv-r.hadley.nz/functionals.html) \n  - [S3](https://adv-r.hadley.nz/s3.html)\n  - [Meta programming](https://adv-r.hadley.nz/metaprogramming.html)\n- [Packages](https://r-pkgs.org)\n- [Programming with/for `ggplot2`](https://ggplot2-book.org)\n- [Programming with `dplyr`](https://dplyr.tidyverse.org/articles/programming.html)\n- [`tidyeval` helpers](https://ggplot2.tidyverse.org/reference/tidyeval.html)\n- [Cheatsheets](https://posit.co/resources/cheatsheets/)\n\n\n\n\n\n{{< pagebreak >}}\n\n\n\n\n\n\n| Criterion | Points  | Details |\n|:----------|:-------:|:--------|\n| Documentation/Report | 45% | English/French {{<  fa pen-fancy >}} |\n| Presentation | 40% |  |\n| Data gathering/cleaning pipelines | 15% |  |\n: {{<  fa graduation-cap >}} Grading criteria ",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}